<template>    <div class="clearfix map-container">        <h2 class="map-title">周边配套</h2>        <div class="map-content clearfix">            <div class="map-list fll">                <div id="allmap" class="map-item" v-show="activeName == 1"></div>            </div>            <div class="wrap clearfix flr">                <el-tabs v-model="activeName" type="card" class="map-tab flr">                    <el-tab-pane label="交通" name="1">                        <div>                            两公里以内的交通设施                        </div>                    </el-tab-pane>                    <el-tab-pane label="商业" name="2">                    </el-tab-pane>                    <el-tab-pane label="教育" name="3">                    </el-tab-pane>                    <el-tab-pane label="医院" name="4">                    </el-tab-pane>                </el-tabs>            </div>        </div>    </div></template><script>    import {mapState} from 'vuex'    export default {        data() {            return {                activeName: "1",                mapObj: {                    map: null,                    point: null,                    local: null                }            }        },        methods: {            loadScript() {                if (document.getElementById("fooju-map")) return;//异步加载地图api                window.initMap = this.initMap;                let script = document.createElement("script");                script.src = "http://api.map.baidu.com/api?v=2.0&ak=T8aGZOH2GC1ypqIbi7ZZ35NeO0AR4tgl&callback=initMap";                script.id = "fooju-map";                document.body.appendChild(script);            },            initMap() {                let mapObj = this.mapObj;                this.$nextTick(() => {                    //定义地图经纬度变量(当获取不到数据的时候采用默认值)                    // let log = 111.65;                    let log = 111.708791;                    // let lat = 40.82                    let lat = 40.845696                    this.mapObj.map = new BMap.Map("allmap");  //设置地图对象                    // 判断后端数据是否有传输经纬度                    // if(this.houseDetails.jibenxinxi.log){                    //     log = this.houseDetails.jibenxinxi.log;                    //     lat = this.houseDetails.jibenxinxi.lat;                    //                    //     // 周边搜索服务,利用百度地图api进行周边搜索                    //                    //                    //                    //                    // }                    // 定义搜索设置                    mapObj.options  = {                        renderOptions: {                            autoViewport: true                        },                        onSearchComplete: function(results){                            console.log(results);                            if (mapObj.local.getStatus() == BMAP_STATUS_SUCCESS){                                // 判断状态是否正确                                var s = [];                                for (var i = 0; i < results.getCurrentNumPois(); i ++){                                    // s.push(results.getPoi(i).title + ", " + results.getPoi(i).address);                                    s.push(results.getPoi(i))                                }                                console.log(s);                            }                        }                    }                    this.mapObj.point = new BMap.Point(log, lat);  // 创建点坐标                    this.mapObj.map.centerAndZoom(this.mapObj.point, 15); // 初始化地图，设置中心点坐标和地图级别                    this.mapObj.map.enableScrollWheelZoom(true);                    this.mapObj.local = new BMap.LocalSearch(this.mapObj.map, mapObj.options);                    this.mapObj.local.searchNearby("医院", mapObj.point, 1000);                    // 绘制一个圆形区域                    this.mapObj.circle = new BMap.Circle(this.mapObj.point, 1000, {                        fillColor: "blue",  //填充颜色                        strokeWeight: 1,   //圆形边线的宽度，以像素为单位                        fillOpacity: 0.3, //形填充的透明度，取值范围0 - 1                        strokeOpacity: 0.3 //圆形边线透明度，取值范围0 - 1                    });                    this.mapObj.map.addOverlay(this.mapObj.circle); //将圆形区域绘制到地图上                })            }        },        mounted() {            this.loadScript();        },        computed: {            ...mapState(['houseDetails'])        }    }</script><style scoped lang="scss">    .map-title {        font-size: 30px;        color: #333;        font-weight: lighter;    }    .map-container {        width: 1100px;        margin: 40px auto 0;        .map-content {            box-sizing: border-box;            border: 1px solid #ccc;            padding: 14px 0 14px 14px;            margin-top: 40px;        }    }    .map-tab {        width: 481px;    }    .map-item {        width: 578px;        height: 400px;    }</style>
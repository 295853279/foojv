<template>    <div class="collect-house clearfix">        <div class="collect fll" :class="{active: currentCollect}" >            <i class="iconfont icon-shoucang" v-if="!currentCollect" @click="handleCollect"></i>            <i class="iconfont icon-shoucang" v-else @click="handleCancelCollect"></i>            <span v-if="!currentCollect" @click="handleCollect">关注此房源</span>            <span v-else @click="handleCancelCollect">已关注</span>        </div>        <div class="share fll" @click="handleShare" >            <i class="iconfont icon-fenxiang1"></i>            <span>分享此房源</span>        </div>        <el-dialog                title="微信扫描二维码分享"                :visible.sync="isShowDialog" style="text-align: center;"                width="50%"        >            <canvas id="qrcode"></canvas>        </el-dialog>    </div></template><script>    import {mapState} from 'vuex'    import qrcode from 'qrcode'    import api from '~/api'    export default {        name: "follow",        props: {            collect: {                type: Boolean,                default: false            }        },        data() {            return {                currentCollect: this.collect,                isShowDialog: false            }        },        created() {            console.log(this.$route.name)        },        watch: {            collect(val) {                this.currentCollect = val;            }        },        methods: {            handleCollect() {                let params = {                    house_id: this.$route.params.id                }                //判断是否登录                if(this.userid){                    params.user_id = this.userid                }                else {                    this.$router.push("/login")                }                if(this.$route.name == "secondHand-id"){                    params.type = 1;                }                this.$axios.post(api.houseCollect,params).then(res => {                    if(res.data.code == 200){                        this.$message.success("收藏成功")                        this.currentCollect = true;                    }                })            },            handleCancelCollect() {                let params = {                    house_id: this.$route.params.id                }                //判断是否登录                if(this.userid){                    params.user_id = this.userid                }                else {                    this.$router.push("/login")                }                if(this.$route.name == "secondHand-id"){                    params.type = 1;                }                this.$axios.post(api.houseCollectCancel,params).then(res => {                    if(res.data.code == 200){                        this.$message.error("您已取消收藏")                        this.currentCollect = false;                    }                })            },            handleShare() {                this.isShowDialog = true;                let msg = ""                if(this.$route.name == "secondHand-id"){                    msg = `http://m.fooju.cn/secondHand/${this.$route.params.id}`                }                this.$nextTick(() => {                    qrcode.toCanvas(document.getElementById('qrcode'), msg, function (error) {                        if (error) console.error(error)                        console.log('success!');                    })                })            }        },        computed: {            ...mapState(['userid'])        }    }</script><style>    .icon-shoucang,.icon-fenxiang1 {        margin-right: 8px;    }    .collect,    .share {        margin-right: 30px;        cursor: pointer;    }    .active {        color: #c30d23;    }</style>